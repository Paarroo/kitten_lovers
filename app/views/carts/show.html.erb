<div class="page-wrapper d-flex flex-column min-vh-100">

  
  <div class="beige-section py-5 w-100" style="margin-top: 15rem;">
    <div class="container">
      <h1 class="text-center mb-5 fw-bold">Mon Panier</h1>

      <% if @cart_items.any? %>
        <div class="d-flex justify-content-center">
          <div class="grid-responsive">
            <% @cart_items.each do |cart_item| %>
              <div class="card shadow-sm p-3 rounded text-center" style="width: 300px;">
                <% if cart_item.item.image_url.present? %>
                  <%= image_tag(cart_item.item.image_url, alt: cart_item.item.title, class: "card-img-top mb-3", style: "object-fit: cover; height: 200px;") %>
                <% end %>

                <div class="card-body p-0">
                  <h5 class="card-title mb-2"><%= cart_item.item.title %></h5>
                  <p class="card-text mb-2"><%= cart_item.item.description %></p>
                  <p class="fw-semibold">Prix : <%= number_to_currency(cart_item.item.price, unit: "€") %></p>

                  <%= button_to "Retirer cet article", cart_cart_item_path(cart_item), method: :delete,
                      data: { confirm: "Supprimer cet article du panier ?" },
                      class: "btn btn-outline-danger mt-2" %>
                </div>
              </div>
            <% end %>
          </div>
        </div>

        <div class="mt-5 text-center">
          <h4 class="fw-bold mb-3">Total : <%= number_to_currency(@cart.total_price, unit: "€") %></h4>

          <div class="d-flex flex-wrap justify-content-center gap-3">
            <%= button_to "Procéder au paiement sécurisé", checkout_path, method: :post, class: "btn btn-primary" %>
            <%= button_to "Vider le panier", clear_cart_path, method: :delete,
                data: { confirm: "Êtes-vous sûr ?" },
                class: "btn btn-secondary" %>
          </div>
        </div>
      <% else %>
        <p class="text-muted text-center">Ton panier est vide.</p>
      <% end %>
    </div>
  </div>
</div>
